# APIS

Vamos prosseguir para o design de API. É importante projetar APIs consistentes para serviços. O Google fornece um guia de projeto de API com recomendações como nomes, documentação sobre tratamento de erros, controle de versões e compatibilidade.

Cada serviço do GCP expõe uma API REST. Funções são definidas no formulário: `service.collection.verb`. O serviço representa o endpoint do serviço. Por exemplo, para a API Compute Engine, o endpoint do serviço é compute.googleapis.com. As coleções incluem instances, instanceGroups e instanceTemplates. Os verbos incluem list, get e insert, por exemplo.

A OpenAPI é um padrão do setor para expor APIs para clientes. A versão 2.0 dessa especificação era chamada de Swagger. Agora, ela é um conjunto de ferramentas de código aberto criadas em OpenAPI, que, junto de ferramentas associadas, é compatível com criação, consumo e documentação de APIs. A OpenAPI suporta abordagem de priorização de API. Projetar a API pela OpenAPI fornece uma fonte de verdade única, da qual códigos-fontes para bibliotecas de clientes e stubs de servidores podem ser gerados automaticamente, bem como documentação para usuários da API. A OpenAPI é compatível com o Cloud Endpoins e a Apigee.

Desenvolvido no Google, o gRPC é um protocolo binário muito útil para comunicação de microsserviços internos. Ele fornece suporte para várias linguagens de programação, tem amplo suporte para acoplamento flexível via contratos definidos usando buffers de protocolo e é de alto desempenho, porque é um protocolo binário. Ele é baseado em HTTP2 e é compatível com streaming do cliente e do servidor. O protocolo é compatível com muitos serviços do GCP, como o balanceador de carga global e o Cloud Endpoints para microsserviços, bem como pelo GKE, usando um proxy envoy.

O GCP fornece duas ferramentas para gerenciar APIs, o Cloud Endpoints e a Apigee. O primeiro é um gateway de gerenciamento de API para desenvolver, implantar e gerenciar APIs em qualquer back-end do GCP. Ele é executado no GCP e aproveita a infraestrutura do Google. A Apigee é uma plataforma de gerenciamento de API criada para empresas, com opções de implantação na nuvem, no local ou híbridas. O conjunto de recursos inclui um portal personalizável de gateway de API para a integração de parceiros e desenvolvedores, monetização e análises aprofundadas sobre APIs. É possível usar Apigee para quaisquer back-ends HTTP ou HTTPS, seja qual for o ambiente de execução: no local, em qualquer nuvem pública etc. As duas soluções fornecem ferramentas para serviços, como autenticação de usuários, monitoramento e segurança, bem como para OpenAPI e gRPC.